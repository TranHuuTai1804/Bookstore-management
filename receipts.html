<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Receipts</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abel&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/home.css">
    <style>
        /* Style cho toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            opacity: 0;
            transition: opacity 0.5s ease;
            visibility: hidden;
            z-index: 10001;
        }

        .toast.show {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="navbar">
            <div class="navbar-left">
                <a href="/home"><img src="/img/logo.svg" alt=""></a>
                <ul>
                    <li><a href="/home">Home</a></li>
                    <li><a href="#">About us</a></li>
                    <li><a href="#">Staff</a></li>
                </ul>
            </div>

            <div class="navbar-right">
                <img src="/img/search.svg" alt="">
                <button class="logout"><a href="/">Log Out</a></button>
            </div>
        </div>
    </header>

    <!-- Block Book Entry Form -->
    <div class="book-entry-form">
        <h2>Receipts</h2>
    </div>

    <div class="form-container">
        <form id="receipt-form">
            <div class="form-group">
                <label for="customer">Customer:</label>
                <input type="text" id="customer" name="customer" placeholder="Enter customer name">
            </div>

            <div class="form-group">
                <label for="phone">Phone number:</label>
                <input type="text" id="phone" name="phone" placeholder="Enter phone number">
            </div>

            <div class="form-group">
                <label for="address">Address:</label>
                <input type="text" id="address" name="address" placeholder="Enter address">
            </div>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" placeholder="Enter email">
            </div>

            <div class="form-group">
                <label for="date-receipt">Date receipt:</label>
                <div class="date-picker">
                    <input type="text" id="date-receipt" name="date-receipt" placeholder="Select date" readonly>
                    <img src="/img/calendar.svg" alt="Calendar Icon" id="calendar-icon">
                </div>
            </div>

            <div class="form-group">
                <label for="price">Price:</label>
                <input type="text" id="price" name="price" placeholder="Enter price">
            </div>

        </form>
    </div>

    <button class="done-btn" onclick="submitReceipts()">Done</button>
    <button class="open-menu" onclick="toggleMenu()">></button>

    <!-- Overlay -->
    <div id="overlay" class="overlay"></div>

    <!-- Menu Section -->
    <div id="hero-menu" class="menu-ovl" style="display: none;">
        <button><a href="/bookempty">Book Entry Form</a></button>
        <button><a href="/bookinvoice">Book Invoice</a></button>
        <button><a href="lookup">Book Lookup</a></button>
        <button><a href="/receipts">Receipt</a></button>
        <button><a href="/report">Monthly Report</a></button>
        <button><a href="/edit">Edit Regulations</a></button>
    </div>

    <!-- Toast thông báo -->
    <div id="toast" class="toast">Books added successfully!</div>

    <script>
        function toggleMenu() {
            const menu = document.getElementById("hero-menu");
            const overlay = document.getElementById("overlay");
            const icon = document.querySelector(".open-menu");
            const body = document.body;

            // Kiểm tra nếu menu đang ẩn
            if (menu.style.display === "none" || menu.style.display === "") {
                menu.style.display = "block"; // Mở menu
                setTimeout(() => {
                    menu.style.left = "0"; // Đặt menu vào vị trí mong muốn với hiệu ứng trượt
                }, 10); // Đảm bảo hiệu ứng trượt được áp dụng
                overlay.style.display = "block"; // Hiện overlay
                icon.textContent = "<"; // Đổi icon thành '<'

                // Thêm lớp menu-open để di chuyển icon
                body.classList.add("menu-open");
            } else {
                menu.style.left = "-30%"; // Ẩn menu với hiệu ứng trượt
                overlay.style.display = "none"; // Ẩn overlay
                icon.textContent = ">"; // Đổi icon thành '>'

                // Loại bỏ lớp menu-open để di chuyển icon về vị trí ban đầu
                body.classList.remove("menu-open");

                setTimeout(() => {
                    menu.style.display = "none"; // Ẩn menu sau khi trượt hoàn tất
                }, 300); // Thời gian trượt hoàn tất trước khi ẩn menu
            }
        }

        // Ẩn thanh cuộn khi người dùng lướt lên hoặc xuống
        const menuOv = document.getElementById("hero-menu");

        menuOv.addEventListener('scroll', function() {
            menuOv.style.scrollbarWidth = 'none'; // Ẩn thanh cuộn khi lướt
            clearTimeout(menuOv.scrollTimeout);
            
            menuOv.scrollTimeout = setTimeout(function() {
                menuOv.style.scrollbarWidth = 'thin'; // Hiển thị lại thanh cuộn khi ngừng lướt
            }, 100); // Ẩn thanh cuộn khi lướt và hiển thị lại sau khi ngừng
        });

        // Lấy thẻ input ngày
        const dateInput = document.getElementById("date-receipt");

        // Hàm để lấy ngày hiện tại theo định dạng YYYY-MM-DD
        function getCurrentDate() {
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, "0"); // Tháng bắt đầu từ 0
            const day = String(today.getDate()).padStart(2, "0");
            return `${year}-${month}-${day}`;
        }

        // Gán ngày hiện tại vào thẻ input khi trang được tải lên
        dateInput.value = getCurrentDate();

        // Cập nhật ngày khi người dùng nhấp vào thẻ input
        dateInput.addEventListener("focus", function () {
            dateInput.value = getCurrentDate(); // Gán lại ngày hiện tại nếu có thay đổi
        });

        // Hàm xử lý khi nhấn Done
        function submitReceipts() {
            const form = document.getElementById("receipt-form");
            const formData = new FormData(form);

            const receiptData = {};
            formData.forEach((value, key) => {
                receiptData[key] = value;
            });

            console.log("Form data:", receiptData);

            // Reset form
            form.reset();

            // Hiển thị toast thông báo
            showToast();
        }

        // Hiển thị toast
        function showToast() {
            const toast = document.getElementById("toast");
            toast.classList.add("show");

            setTimeout(() => {
                toast.classList.remove("show");
            }, 3000);
        }
    </script>
</body>
</html>
